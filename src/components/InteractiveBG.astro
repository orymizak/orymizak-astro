---
import "../styles/style.scss";

---

<!-- fondo de colores -->
<div class="gradient-bg">

  <div class="absolute inset-0 overflow-hidden">
    <div class="gradients-container">
      <div class="g1"></div>
      <div class="g2"></div>
      <div class="g3"></div>
      <div class="g4"></div>
      <div class="g5"></div>
    </div>
  </div>

  <div class="interactive"></div>
</div>

<script is:inline>
  if (typeof window !== "undefined") {
    const interBubble = document.querySelector(".interactive");
    let curX = 0;
    let curY = 0;
    let tgX = 0;
    let tgY = 0;

    // velocidad del mouse interactivo
    const minSpeed = 0.08;
    const maxSpeed = 4;
    const factor = 0.012;

    function move() {
      const dx = tgX - curX;
      const dy = tgY - curY;
      const dist = Math.sqrt(dx * dx + dy * dy);

      if (dist > 0) {
        // velocidad proporcional
        let step = dist * factor;

        // evitar desaceleración rápida
        step = Math.min(Math.max(step, minSpeed), maxSpeed);

        // mover hacia el mouse
        curX += (dx / dist) * step;
        curY += (dy / dist) * step;
      }

      if (interBubble)
        interBubble.style.transform = `translate(${curX}px, ${curY}px)`;

      requestAnimationFrame(move);
    }

    window.addEventListener("mousemove", (e) => {
      tgX = e.clientX;
      tgY = e.clientY;
    });

    move();
  }
</script>
